import {
  DemoTransferBasicProvider,
  DemoTransferBasicControls,
  DemoTransferBasic,
  DemoTransferWithSearch,
  DemoTransferCustomRender,
  DemoTransferDisabled,
  DemoTransferNoSelectAll,
  DemoTransferPermission,
  DemoTransferTeam,
  DemoTransferFeature,
} from './transfer.demo';
import { Playground } from '@/components/playground/playground';
import { CssSnippet } from '@/components/playground/css-snippet';
import { TransferCss } from '@repo/ui';

# Transfer

Transfer 컴포넌트는 두 리스트 간에 항목을 이동시킬 수 있는 Headless 컴포넌트입니다. 권한 관리, 멤버 선택, 기능 토글 등에 사용됩니다.

## 기본 사용법

Transfer 컴포넌트는 `dataSource`와 `targetKeys`를 통해 데이터를 관리합니다.

<DemoTransferBasicProvider>
  <Playground
    preview={<DemoTransferBasic />}
    controls={<DemoTransferBasicControls />}
  />
</DemoTransferBasicProvider>

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

const dataSource: TransferItem[] = [
  { key: '1', title: 'Item 1', description: '첫 번째 항목 설명' },
  { key: '2', title: 'Item 2', description: '두 번째 항목 설명' },
  { key: '3', title: 'Item 3', description: '세 번째 항목 설명' },
  { key: '4', title: 'Item 4', description: '네 번째 항목 설명' },
];

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>(['1', '4']);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={dataSource}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      titles={['사용 가능한 항목', '선택된 항목']}
      operations={['추가 →', '← 제거']}
    />
  );
}
```

## With Search

검색 기능을 추가할 수 있습니다.

<Playground preview={<DemoTransferWithSearch />} />

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

const dataSource: TransferItem[] = [
  { key: '1', title: 'Item 1', description: '첫 번째 항목 설명' },
  { key: '2', title: 'Item 2', description: '두 번째 항목 설명' },
  { key: '3', title: 'Item 3', description: '세 번째 항목 설명' },
];

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>(['2', '3']);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={dataSource}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      showSearch
      filterOption={(inputValue, item) =>
        item.title.indexOf(inputValue) !== -1 ||
        (item.description ? item.description.indexOf(inputValue) !== -1 : false)
      }
      titles={['검색 가능', '선택됨']}
    />
  );
}
```

## Custom Render

항목 렌더링을 커스터마이징할 수 있습니다.

<Playground preview={<DemoTransferCustomRender />} />

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

const dataSource: TransferItem[] = [
  { key: '1', title: 'Item 1', description: '첫 번째 항목 설명' },
  { key: '2', title: 'Item 2', description: '두 번째 항목 설명' },
  { key: '3', title: 'Item 3', description: '세 번째 항목 설명' },
];

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>(['5', '6']);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={dataSource.map((item) => ({
        ...item,
        title: `${item.title} - 커스텀`,
      }))}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      render={(item) => (
        <div>
          <strong>{item.title}</strong>
          <br />
          <small style={{ color: 'var(--color-text-secondary)' }}>
            {item.description}
          </small>
        </div>
      )}
      titles={['커스텀 아이템', '선택된 커스텀']}
    />
  );
}
```

## With Disabled Items

특정 항목을 비활성화할 수 있습니다.

<Playground preview={<DemoTransferDisabled />} />

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

const dataSource: TransferItem[] = [
  { key: '1', title: 'Item 1', description: '첫 번째 항목 설명' },
  { key: '2', title: 'Item 2', description: '두 번째 항목 설명' },
  { key: '3', title: 'Item 3', description: '세 번째 항목 설명' },
];

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>(['7']);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={dataSource.map((item, index) => ({
        ...item,
        disabled: index % 3 === 0, // 3의 배수 항목들은 비활성화
      }))}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      titles={['일부 비활성화', '선택됨']}
    />
  );
}
```

## Without Select All

전체 선택 기능을 숨길 수 있습니다.

<Playground preview={<DemoTransferNoSelectAll />} />

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

const dataSource: TransferItem[] = [
  { key: '1', title: 'Item 1', description: '첫 번째 항목 설명' },
  { key: '2', title: 'Item 2', description: '두 번째 항목 설명' },
  { key: '3', title: 'Item 3', description: '세 번째 항목 설명' },
];

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>(['1', '2']);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={dataSource}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      showSelectAll={false}
      titles={['전체 선택 없음', '선택됨']}
    />
  );
}
```

## 실제 사용 사례

### 권한 관리

사용자 권한 설정에 사용할 수 있습니다.

<Playground preview={<DemoTransferPermission />} />

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>(['read', 'write']);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={[
        {
          key: 'read',
          title: '읽기 권한',
          description: '데이터 조회 권한',
        },
        {
          key: 'write',
          title: '쓰기 권한',
          description: '데이터 생성/수정 권한',
        },
        {
          key: 'delete',
          title: '삭제 권한',
          description: '데이터 삭제 권한',
        },
        {
          key: 'admin',
          title: '관리자 권한',
          description: '모든 권한 포함',
        },
      ]}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      titles={['사용 가능한 권한', '부여된 권한']}
      operations={['권한 부여 →', '← 권한 제거']}
      showSearch
      filterOption={(inputValue, item) => item.title.indexOf(inputValue) !== -1}
    />
  );
}
```

## 기본 스타일(CSS) (Inject Styles)

<CssSnippet css={TransferCss} title="TransferCss" />

### 팀 멤버 선택

프로젝트 팀 멤버 선택에 사용할 수 있습니다.

<Playground preview={<DemoTransferTeam />} />

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>(['john', 'jane']);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={[
        {
          key: 'john',
          title: 'John Doe',
          description: '프론트엔드 개발자',
        },
        {
          key: 'jane',
          title: 'Jane Smith',
          description: '백엔드 개발자',
        },
        {
          key: 'bob',
          title: 'Bob Johnson',
          description: 'UI/UX 디자이너',
        },
      ]}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      titles={['전체 멤버', '프로젝트 팀']}
      operations={['팀에 추가 →', '← 팀에서 제거']}
      showSearch
      filterOption={(inputValue, item) =>
        item.title.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1 ||
        (item.description
          ? item.description.toLowerCase().indexOf(inputValue.toLowerCase()) !==
            -1
          : false)
      }
      render={(item) => (
        <div>
          <strong>{item.title}</strong>
          <br />
          <small style={{ color: 'var(--color-text-secondary)' }}>
            {item.description}
          </small>
        </div>
      )}
    />
  );
}
```

### 기능 토글

애플리케이션 기능 설정에 사용할 수 있습니다.

<Playground preview={<DemoTransferFeature />} />

```tsx
import { Transfer } from '@repo/ui';
import type { TransferItem } from '@repo/ui';
import { useState } from 'react';

export function MyComponent() {
  const [targetKeys, setTargetKeys] = useState<string[]>([
    'notifications',
    'auto-save',
  ]);
  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);

  return (
    <Transfer
      dataSource={[
        {
          key: 'notifications',
          title: '푸시 알림',
          description: '중요 알림 푸시',
        },
        {
          key: 'dark-mode',
          title: '다크 모드',
          description: '어두운 테마 적용',
        },
        {
          key: 'auto-save',
          title: '자동 저장',
          description: '작업 자동 저장',
        },
      ]}
      targetKeys={targetKeys}
      selectedKeys={selectedKeys}
      onChange={(keys) => setTargetKeys(keys)}
      onSelectChange={(sourceKeys, targetKeys) =>
        setSelectedKeys([...sourceKeys, ...targetKeys])
      }
      titles={['사용 가능한 기능', '활성화된 기능']}
      operations={['활성화 →', '← 비활성화']}
      showSearch={false}
    />
  );
}
```

## API

### Transfer Props

| Property       | Description              | Type                                                                               | Default                |
| -------------- | ------------------------ | ---------------------------------------------------------------------------------- | ---------------------- |
| dataSource     | Transfer 항목 데이터     | `TransferItem[]`                                                                   | `[]`                   |
| targetKeys     | 선택된 항목 키 배열      | `string[]`                                                                         | `[]`                   |
| selectedKeys   | 현재 선택된 항목 키 배열 | `string[]`                                                                         | `[]`                   |
| onChange       | 항목 이동 콜백           | `(targetKeys: string[], direction: 'left' \| 'right', moveKeys: string[]) => void` | -                      |
| onSelectChange | 선택 상태 변경 콜백      | `(sourceSelectedKeys: string[], targetSelectedKeys: string[]) => void`             | -                      |
| onScroll       | 스크롤 콜백              | `(direction: 'left' \| 'right', e: React.UIEvent) => void`                         | -                      |
| titles         | 양쪽 리스트 제목         | `[ReactNode, ReactNode]`                                                           | `['Source', 'Target']` |
| operations     | 이동 버튼 텍스트         | `[string, string]`                                                                 | `['→', '←']`           |
| showSearch     | 검색 기능 표시 여부      | `boolean`                                                                          | `false`                |
| filterOption   | 검색 필터 함수           | `(inputValue: string, item: TransferItem) => boolean`                              | -                      |
| render         | 커스텀 렌더 함수         | `(item: TransferItem) => ReactNode`                                                | -                      |
| disabled       | 전체 비활성화 여부       | `boolean`                                                                          | `false`                |
| showSelectAll  | 전체 선택 표시 여부      | `boolean`                                                                          | `true`                 |
| oneWay         | 한 방향 이동만 허용      | `boolean`                                                                          | `false`                |
| pagination     | 페이지네이션 설정        | `boolean \| { pageSize?: number }`                                                 | `false`                |
| className      | 추가 CSS 클래스          | `string`                                                                           | -                      |
| classNames     | 내부 요소별 CSS 클래스   | `TransferClassNames`                                                               | -                      |

### TransferItem

| Property    | Description   | Type               | Default |
| ----------- | ------------- | ------------------ | ------- |
| key         | 항목 고유 키  | `string \| number` | -       |
| title       | 항목 제목     | `string`           | -       |
| description | 항목 설명     | `string`           | -       |
| disabled    | 비활성화 여부 | `boolean`          | `false` |

### TransferClassNames

내부 요소별 CSS 클래스를 지정할 수 있습니다.

```tsx
import type { TransferClassNames } from '@repo/ui';

const classNames: TransferClassNames = {
  transfer: 'my-transfer',
  transferList: 'my-transfer-list',
  transferListHeader: 'my-header',
  transferListTitle: 'my-title',
  transferListSearch: 'my-search',
  searchInput: 'my-search-input',
  transferListBody: 'my-body',
  transferListContent: 'my-content',
  transferListItem: 'my-item',
  checkboxLabel: 'my-checkbox-label',
  itemLabel: 'my-item-label',
  itemContent: 'my-item-content',
  itemDescription: 'my-item-description',
  count: 'my-count',
  transferOperations: 'my-operations',
  operationButton: 'my-button',
  operationButtonEnabled: 'my-button-enabled',
};
```

## Styling

Transfer 컴포넌트는 Headless 컴포넌트이므로 스타일을 직접 제공하지 않습니다. `classNames` prop을 통해 내부 요소에 CSS 클래스를 적용할 수 있습니다.

```tsx
import { Transfer } from '@repo/ui';
import * as styles from './my-transfer-styles.css';

<Transfer
  dataSource={dataSource}
  targetKeys={targetKeys}
  selectedKeys={[]}
  classNames={{
    transfer: styles.transfer,
    transferList: styles.transferList,
    // ... 기타 클래스명
  }}
/>;
```

## 특징

- **양방향 이동**: 좌우 리스트 간 항목 이동
- **검색 기능**: showSearch로 항목 검색
- **커스텀 렌더링**: render 함수로 항목 표시 커스터마이징
- **키보드 네비게이션**: 화살표 키로 항목 탐색 가능
- **접근성**: ARIA 속성을 지원하여 스크린 리더와 호환
