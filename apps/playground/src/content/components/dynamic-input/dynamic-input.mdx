import { Playground } from '@/components/playground/playground';
import { CssSnippet } from '@/components/playground/css-snippet';
import { DynamicInputCss } from '@repo/ui';
import {
  DemoDynamicInputBasic,
  DemoDynamicInputBasicWithControls,
  DemoDynamicInputBasicControls,
  DemoDynamicInputBasicProvider,
  DemoDynamicInputMinMax,
  DemoDynamicInputDisabled,
  DemoDynamicInputSizes,
  DemoDynamicInputPlaceholder,
  DemoDynamicInputHandlers,
  DemoDynamicInputCustomRender,
} from './dynamic-input.demo';

# Dynamic Input

Dynamic Input은 사용자가 입력 필드를 동적으로 추가하거나 제거할 수 있는 공간입니다.

## 기본 사용법 (인터랙티브)

아래 예제에서 Dynamic Input의 다양한 설정을 실시간으로 변경해 볼 수 있습니다. 설정은 로컬스토리지에 저장되어 페이지를 새로고침해도 유지됩니다.

<DemoDynamicInputBasicProvider>
  <Playground
    preview={<DemoDynamicInputBasicWithControls />}
    controls={<DemoDynamicInputBasicControls />}
  />
</DemoDynamicInputBasicProvider>

## 기본 사용법

Dynamic Input 컴포넌트를 사용하여 입력 필드를 동적으로 관리할 수 있습니다.

<Playground preview={<DemoDynamicInputBasic />} />

```tsx
import { DynamicInput } from '@repo/ui';
import { useState } from 'react';

export function MyComponent() {
  const [inputs, setInputs] = useState<string[]>(['']);

  return <DynamicInput value={inputs} onChange={setInputs} />;
}
```

## 최소/최대 개수 제한

`min`과 `max` prop을 사용하여 입력 필드 개수를 제한할 수 있습니다.

<Playground preview={<DemoDynamicInputMinMax />} />

```tsx
<DynamicInput value={inputs} onChange={setInputs} min={2} max={5} />
```

## 비활성화

`disabled` prop을 사용하여 Dynamic Input을 비활성화할 수 있습니다.

<Playground preview={<DemoDynamicInputDisabled />} />

```tsx
<DynamicInput value={inputs} disabled />
```

## 크기 변형

`size` prop을 사용하여 입력 필드 크기를 조절할 수 있습니다.

<Playground preview={<DemoDynamicInputSizes />} />

```tsx
<DynamicInput
  value={inputs}
  onChange={setInputs}
  size="small" // 'small' | 'medium' | 'large'
/>
```

## 커스텀 플레이스홀더

`placeholder` prop을 함수로 전달하여 각 입력 필드에 다른 플레이스홀더를 설정할 수 있습니다.

<Playground preview={<DemoDynamicInputPlaceholder />} />

```tsx
<DynamicInput
  value={inputs}
  onChange={setInputs}
  placeholder={(index) => `항목 ${index + 1}을 입력하세요`}
/>
```

## 커스텀 핸들러

`onCreate`와 `onRemove` prop을 사용하여 입력 필드 생성/제거 시 커스텀 로직을 실행할 수 있습니다.

<Playground preview={<DemoDynamicInputHandlers />} />

```tsx
<DynamicInput
  value={inputs}
  onChange={setInputs}
  onCreate={async () => {
    // 입력 필드 생성 전 검증
    if (inputs.length >= 5) {
      alert('최대 5개까지만 추가할 수 있습니다.');
      return false; // 생성 취소
    }
    return true; // 생성 허용
  }}
  onRemove={async (index) => {
    // 입력 필드 제거 전 확인
    return confirm(`${index + 1}번째 입력 필드를 제거하시겠습니까?`);
  }}
/>
```

## 커스텀 렌더링

`renderInput` prop을 사용하여 입력 필드를 커스텀 렌더링할 수 있습니다.

<Playground preview={<DemoDynamicInputCustomRender />} />

```tsx
<DynamicInput
  value={inputs}
  onChange={setInputs}
  renderInput={(value, index, onChange) => (
    <div
      key={index}
      style={
        {
          /* 커스텀 스타일 */
        }
      }
    >
      <span>{index + 1}.</span>
      <input
        type="text"
        value={value}
        onChange={(e) => onChange(e.target.value)}
      />
    </div>
  )}
/>
```

## API

### DynamicInput Props

| Property     | Description                   | Type                                                                             | Default        |
| ------------ | ----------------------------- | -------------------------------------------------------------------------------- | -------------- |
| value        | 제어된 값                     | `string[]`                                                                       | -              |
| defaultValue | 기본값                        | `string[]`                                                                       | -              |
| onChange     | 값 변경 핸들러                | `(value: string[]) => void`                                                      | -              |
| min          | 최소 입력 필드 개수           | `number`                                                                         | `0`            |
| max          | 최대 입력 필드 개수           | `number`                                                                         | -              |
| onCreate     | 입력 필드 생성 핸들러         | `() => void \| boolean \| Promise<void \| boolean>`                              | -              |
| onRemove     | 입력 필드 제거 핸들러         | `(index: number) => void \| boolean \| Promise<void \| boolean>`                 | -              |
| disabled     | 비활성화 여부                 | `boolean`                                                                        | `false`        |
| className    | 추가 CSS 클래스               | `string`                                                                         | -              |
| classNames   | 내부 요소들에 적용할 클래스명 | `object`                                                                         | -              |
| renderInput  | 커스텀 렌더 함수              | `(value: string, index: number, onChange: (value: string) => void) => ReactNode` | -              |
| placeholder  | 입력 필드 플레이스홀더        | `string \| ((index: number) => string)`                                          | `'입력하세요'` |
| size         | 입력 필드 크기                | `'small' \| 'medium' \| 'large'`                                                 | `'medium'`     |
| injectStyles | 기본 스타일 주입 여부         | `boolean`                                                                        | `true`         |

## 기본 스타일(CSS) (Inject Styles)

<CssSnippet css={DynamicInputCss} title="DynamicInputCss" />

## 특징

- **동적 입력 필드 관리**: 입력 필드를 동적으로 추가하거나 제거할 수 있습니다
- **Headless 설계**: 스타일링은 사용자가 제어합니다
- **제어/비제어 모드**: `value`와 `defaultValue`를 통한 상태 관리 지원
- **커스텀 핸들러**: 입력 필드 생성/제거 시 커스텀 로직 실행 가능
- **접근성**: 키보드 네비게이션 및 ARIA 속성 지원
