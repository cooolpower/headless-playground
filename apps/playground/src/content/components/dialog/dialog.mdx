import {
  DemoDialogBasic,
  DemoDialogBasicWithControls,
  DemoDialogBasicControls,
  DemoDialogBasicProvider,
  DemoDialogWithFooter,
  DemoDialogCentered,
  DemoDialogCustomSize,
  DemoDialogWithLoading,
} from './dialog.demo';
import { Playground } from '@/components/playground/playground';
import { CssSnippet } from '@/components/playground/css-snippet';
import { DialogCss } from '@repo/ui';

# Dialog

Dialog 컴포넌트는 모달 다이얼로그를 표시하는 Headless 컴포넌트입니다. 사용자에게 중요한 정보를 전달하거나 확인을 받을 때 사용됩니다.

## 기본 사용법

Dialog를 사용하려면 `open`과 `onOpenChange` prop을 통해 상태를 제어해야 합니다.

### 기본 Dialog (인터랙티브)

<DemoDialogBasicProvider>
  <Playground
    preview={<DemoDialogBasicWithControls />}
    controls={<DemoDialogBasicControls />}
  />
</DemoDialogBasicProvider>

<Playground preview={<DemoDialogBasic />} />

```tsx
import { useState } from 'react';
import { Dialog } from '@repo/ui';
import { Button } from '@repo/ui';

export function MyComponent() {
  const [open, setOpen] = useState(false);

  return (
    <>
      <Button onClick={() => setOpen(true)}>Open Dialog</Button>
      <Dialog
        open={open}
        onOpenChange={setOpen}
        title="Dialog Title"
        content="This is the dialog content"
      />
    </>
  );
}
```

## With Footer

Footer를 추가하여 액션 버튼을 배치할 수 있습니다.

<Playground preview={<DemoDialogWithFooter />} />

```tsx
import { useState } from 'react';
import { Dialog } from '@repo/ui';
import { Button } from '@repo/ui';

export function MyComponent() {
  const [open, setOpen] = useState(false);

  const handleConfirm = () => {
    alert('Action confirmed!');
    setOpen(false);
  };

  return (
    <>
      <Button onClick={() => setOpen(true)}>Open Dialog with Footer</Button>
      <Dialog
        open={open}
        onOpenChange={setOpen}
        title="Confirm Action"
        content="Are you sure you want to proceed?"
        footer={
          <div
            style={{
              display: 'flex',
              justifyContent: 'flex-end',
              gap: '0.5rem',
            }}
          >
            <Button onClick={() => setOpen(false)}>Cancel</Button>
            <Button onClick={handleConfirm}>Confirm</Button>
          </div>
        }
      />
    </>
  );
}
```

## Centered

Dialog를 화면 중앙에 배치할 수 있습니다.

<Playground preview={<DemoDialogCentered />} />

```tsx
import { useState } from 'react';
import { Dialog } from '@repo/ui';
import { Button } from '@repo/ui';

export function MyComponent() {
  const [open, setOpen] = useState(false);

  return (
    <>
      <Button onClick={() => setOpen(true)}>Open Centered Dialog</Button>
      <Dialog
        open={open}
        onOpenChange={setOpen}
        title="Centered Dialog"
        content="This dialog is centered"
        centered
      />
    </>
  );
}
```

## Custom Size

Dialog의 크기를 커스터마이징할 수 있습니다.

<Playground preview={<DemoDialogCustomSize />} />

```tsx
import { useState } from 'react';
import { Dialog } from '@repo/ui';
import { Button } from '@repo/ui';

export function MyComponent() {
  const [open, setOpen] = useState(false);

  return (
    <>
      <Button onClick={() => setOpen(true)}>Open Large Dialog</Button>
      <Dialog
        open={open}
        onOpenChange={setOpen}
        title="Large Dialog"
        content="This is a large dialog"
        width={800}
        height={600}
      />
    </>
  );
}
```

## With Loading

확인 버튼에 로딩 상태를 표시할 수 있습니다.

<Playground preview={<DemoDialogWithLoading />} />

```tsx
import { useState } from 'react';
import { Dialog } from '@repo/ui';
import { Button } from '@repo/ui';

export function MyComponent() {
  const [open, setOpen] = useState(false);
  const [loading, setLoading] = useState(false);

  const handleOk = async () => {
    setLoading(true);
    // Simulate async operation
    await new Promise((resolve) => setTimeout(resolve, 2000));
    setLoading(false);
    alert('Processing complete!');
    setOpen(false);
  };

  return (
    <>
      <Button onClick={() => setOpen(true)}>Open Dialog with Loading</Button>
      <Dialog
        open={open}
        onOpenChange={setOpen}
        title="Processing"
        content="Please wait..."
        onOk={handleOk}
        confirmLoading={loading}
      />
    </>
  );
}
```

## API

### Dialog Props

| Property       | Description                        | Type                            | Default     |
| -------------- | ---------------------------------- | ------------------------------- | ----------- |
| open           | Dialog 열림/닫힘 상태              | `boolean`                       | -           |
| onOpenChange   | Dialog 상태 변경 핸들러            | `(open: boolean) => void`       | -           |
| title          | Dialog 제목                        | `React.ReactNode`               | -           |
| content        | Dialog 콘텐츠                      | `React.ReactNode`               | -           |
| width          | Dialog 너비                        | `number \| string`              | `520`       |
| height         | Dialog 높이                        | `number \| string`              | -           |
| centered       | 화면 중앙 배치                     | `boolean`                       | `false`     |
| closable       | 닫기 버튼 표시 여부                | `boolean`                       | `true`      |
| maskClosable   | 마스크 클릭으로 닫기 여부          | `boolean`                       | `true`      |
| destroyOnClose | 닫을 때 DOM에서 제거할지 여부      | `boolean`                       | `false`     |
| footer         | Footer 내용 (null이면 footer 숨김) | `React.ReactNode \| null`       | 기본 footer |
| okText         | 확인 버튼 텍스트                   | `string`                        | `'확인'`    |
| cancelText     | 취소 버튼 텍스트                   | `string`                        | `'취소'`    |
| onOk           | 확인 버튼 클릭 핸들러              | `(e: React.MouseEvent) => void` | -           |
| onCancel       | 취소 버튼 클릭 핸들러              | `(e: React.MouseEvent) => void` | -           |
| confirmLoading | 확인 버튼 로딩 상태                | `boolean`                       | `false`     |
| injectStyles   | 기본 스타일 주입 여부              | `boolean`                       | `true`      |
| className      | 추가 CSS 클래스                    | `string`                        | -           |
| children       | Dialog 콘텐츠 (content 대신 사용)  | `React.ReactNode`               | -           |

## 특징

- **키보드 지원**: ESC 키로 Dialog를 닫을 수 있습니다
- **포커스 트랩**: Dialog가 열려있을 때 포커스가 Dialog 내부에 고정됩니다
- **스크롤 방지**: Dialog가 열려있을 때 배경 스크롤이 차단됩니다
- **접근성**: ARIA 속성을 지원하여 스크린 리더와 호환됩니다

## 기본 스타일(CSS) (Inject Styles)

<CssSnippet css={DialogCss} title="DialogCss" />
