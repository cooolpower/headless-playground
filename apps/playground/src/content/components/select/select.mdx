import {
  DemoSelectBasic,
  DemoSelectBasicWithControls,
  DemoSelectBasicControls,
  DemoSelectBasicProvider,
  DemoSelectDefaultValue,
  DemoSelectDisabled,
  DemoSelectClearable,
  DemoSelectSearchable,
  DemoSelectSizes,
  DemoSelectDisabledOptions,
  DemoSelectMultiple,
  DemoSelectGrouped,
  DemoSelectLoading,
  DemoSelectCustomOption,
  DemoSelectTag,
} from './select.demo';
import { CssSnippet } from '@/components/playground/css-snippet';
import { SelectCss } from '@repo/ui';

# Select

드롭다운 목록에서 항목을 선택할 수 있는 컴포넌트입니다.

Select는 사용자가 옵션 목록에서 하나의 값을 선택할 수 있는 드롭다운 컴포넌트입니다.

### 사용법

```tsx
import { Select } from '@repo/ui';
import type { SelectOption } from '@repo/ui';

const options: SelectOption[] = [
  { label: '옵션 1', value: '1' },
  { label: '옵션 2', value: '2' },
];

export function MyComponent() {
  const [value, setValue] = useState<string | number | undefined>(undefined);

  return (
    <Select
      options={options}
      value={value}
      onChange={setValue}
      placeholder="옵션을 선택하세요"
    />
  );
}
```

### 예제

#### 기본 Select

<DemoSelectBasicProvider>
  <Playground
    preview={<DemoSelectBasicWithControls />}
    controls={<DemoSelectBasicControls />}
  />
</DemoSelectBasicProvider>

```tsx
const [value, setValue] = useState<string | number | undefined>(undefined);

<Select
  options={options}
  value={value}
  onChange={setValue}
  placeholder="옵션을 선택하세요"
/>;
```

#### 기본 스타일(CSS) (Inject Styles)

`injectStyles`를 켜면 Select가 내부에서 기본 스타일을 자동 주입합니다. `injectStyles={false}`로 끄면, 아래 CSS를 전역/레이아웃 등 원하는 위치에서 한 번만 주입해 사용할 수 있습니다.

<CssSnippet css={SelectCss} title="SelectCss" />

#### With Default Value

<Playground preview={<DemoSelectDefaultValue />} />

```tsx
<Select
  options={options}
  defaultValue="2"
  onChange={(value) => console.log('Selected:', value)}
/>
```

#### Disabled

<Playground preview={<DemoSelectDisabled />} />

```tsx
<Select options={options} disabled placeholder="비활성화됨" />
<Select options={options} defaultValue="2" disabled />
```

#### Clearable

<Playground preview={<DemoSelectClearable />} />

```tsx
const [value, setValue] = useState<string | number | undefined>('2');

<Select
  options={options}
  value={value}
  onChange={setValue}
  clearable
  placeholder="옵션을 선택하세요"
/>;
```

#### Searchable

<Playground preview={<DemoSelectSearchable />} />

```tsx
const [value, setValue] = useState<string | number | undefined>(undefined);

<Select
  options={longOptions}
  value={value}
  onChange={setValue}
  searchable
  placeholder="검색하여 선택하세요"
/>;
```

#### Sizes

<Playground preview={<DemoSelectSizes />} />

```tsx
<Select options={options} size="small" placeholder="Small" />
<Select options={options} size="medium" placeholder="Medium" />
<Select options={options} size="large" placeholder="Large" />
```

#### With Disabled Options

<Playground preview={<DemoSelectDisabledOptions />} />

```tsx
const disabledOptions: SelectOption[] = [
  { label: '옵션 1', value: '1' },
  { label: '옵션 2 (비활성화)', value: '2', disabled: true },
  { label: '옵션 3', value: '3' },
];

<Select
  options={disabledOptions}
  value={value}
  onChange={setValue}
  placeholder="옵션을 선택하세요"
/>;
```

#### Multiple

<Playground preview={<DemoSelectMultiple />} />

```tsx
const [value, setValue] = useState<(string | number)[]>([]);

<Select
  options={options}
  value={value}
  onChange={setValue}
  multiple
  placeholder="여러 옵션을 선택하세요"
/>;
```

#### Grouped Options

<Playground preview={<DemoSelectGrouped />} />

```tsx
const groupedOptions: SelectOption[] = [
  { label: '그룹 1 - 옵션 1', value: 'g1-1', group: '그룹 1' },
  { label: '그룹 1 - 옵션 2', value: 'g1-2', group: '그룹 1' },
  { label: '그룹 2 - 옵션 1', value: 'g2-1', group: '그룹 2' },
];

<Select options={groupedOptions} value={value} onChange={setValue} />;
```

#### Loading State

<Playground preview={<DemoSelectLoading />} />

```tsx
const [value, setValue] = useState<string | number | undefined>(undefined);
const [loading, setLoading] = useState(false);

const handleOpen = () => {
  setLoading(true);
  setTimeout(() => {
    setLoading(false);
  }, 2000);
};

<Select
  options={options}
  value={value}
  onChange={setValue}
  onOpen={handleOpen}
  placeholder={loading ? '로딩 중...' : '옵션을 선택하세요'}
  disabled={loading}
/>;
```

#### Custom Option Render

<Playground preview={<DemoSelectCustomOption />} />

```tsx
const customOptions: SelectOption[] = [
  { label: '옵션 1', value: '1', description: '설명 1' },
  { label: '옵션 2', value: '2', description: '설명 2' },
];

<Select
  options={customOptions}
  value={value}
  onChange={setValue}
  placeholder="커스텀 옵션을 선택하세요"
/>;
```

#### Tag Mode

<Playground preview={<DemoSelectTag />} />

```tsx
const [value, setValue] = useState<string | number | undefined>(undefined);
const [customOptions, setCustomOptions] = useState<SelectOption[]>(options);

const handleCreate = (label: string) => {
  const newOption: SelectOption = {
    label,
    value: label,
  };
  setCustomOptions((prev) => [...prev, newOption]);
  setValue(newOption.value);
};

<Select
  options={customOptions}
  value={value}
  onChange={setValue}
  placeholder="옵션을 선택하거나 새로 추가하세요"
  searchable
  tag
  onCreate={handleCreate}
/>;
```

### API Reference

#### Select Props

| Property     | Type                                                                     | Default       | Description                                           |
| ------------ | ------------------------------------------------------------------------ | ------------- | ----------------------------------------------------- |
| options      | `SelectOption[]`                                                         | `[]`          | 선택 옵션 배열                                        |
| value        | `string \| number \| (string \| number)[]`                               | -             | 제어된 값                                             |
| defaultValue | `string \| number \| (string \| number)[]`                               | -             | 기본값                                                |
| placeholder  | `string`                                                                 | `'Select...'` | 플레이스홀더 텍스트                                   |
| disabled     | `boolean`                                                                | `false`       | 비활성화 여부                                         |
| multiple     | `boolean`                                                                | `false`       | 다중 선택 여부                                        |
| searchable   | `boolean`                                                                | `false`       | 검색 기능 활성화 여부                                 |
| clearable    | `boolean`                                                                | `false`       | 지우기 버튼 표시 여부                                 |
| tag          | `boolean`                                                                | `false`       | Tag 모드 활성화 (검색 결과 없을 때 새 옵션 생성 가능) |
| size         | `'small' \| 'medium' \| 'large'`                                         | `'medium'`    | Select 크기                                           |
| onChange     | `(value: string \| number \| (string \| number)[] \| undefined) => void` | -             | 값 변경 핸들러                                        |
| onCreate     | `(label: string) => void`                                                | -             | 새 옵션 생성 콜백 (tag 모드에서 사용)                 |
| onOpen       | `() => void`                                                             | -             | 드롭다운 열림 콜백                                    |
| onClose      | `() => void`                                                             | -             | 드롭다운 닫힘 콜백                                    |
| className    | `string`                                                                 | -             | 추가 CSS 클래스                                       |
| children     | `ReactNode`                                                              | -             | 커스텀 콘텐츠                                         |

#### SelectOption

| Property    | Type               | Default | Description   |
| ----------- | ------------------ | ------- | ------------- |
| label       | `string`           | -       | 옵션 레이블   |
| value       | `string \| number` | -       | 옵션 값       |
| disabled    | `boolean`          | `false` | 비활성화 여부 |
| group       | `string`           | -       | 옵션 그룹명   |
| description | `string`           | -       | 옵션 설명     |

### 특징

- **드롭다운 선택**: 옵션 목록에서 값 선택
- **검색 기능**: `searchable` prop으로 옵션 검색 가능
- **지우기 기능**: `clearable` prop으로 선택 값 초기화 가능
- **다중 선택**: `multiple` prop으로 여러 값 선택 가능
- **제어/비제어 모드**: value와 defaultValue를 통한 상태 관리 지원
- **Headless 설계**: 스타일링은 사용자가 제어
- **접근성**: 키보드 네비게이션 및 ARIA 속성 지원
